{"version":3,"sources":["webpack:///src/app/phone-verification/phone-verification-routing.module.ts","webpack:///src/app/phone-verification/phone-verification.module.ts","webpack:///src/app/phone-verification/phone-verification.page.ts","webpack:///src/app/phone-verification/phone-verification.page.scss","webpack:///src/app/phone-verification/phone-verification.page.html"],"names":["routes","path","component","PhoneVerificationPage","PhoneVerificationPageRoutingModule","NgModule","imports","RouterModule","exports","PhoneVerificationPageModule","CommonModule","FormsModule","ReactiveFormsModule","IonicModule","declarations","apiServices","toastController","formBuilder","loginService","storage","router","waitText","isError","verificationType","userDetails$","of","currentUser","value","codeForm","group","first","FormControl","Validators","second","third","fourth","type","data","userDetails","id","console","log","post","subscribe","res","error","formValues","valid","user","verifiedMobileNumber","next","set","navigate","ApiCallsService","ToastController","FormBuilder","LoginService","Storage","Router","Component","selector","template"],"mappings":"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","file":"src_app_phone-verification_phone-verification_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PhoneVerificationPage } from './phone-verification.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PhoneVerificationPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PhoneVerificationPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PhoneVerificationPageRoutingModule } from './phone-verification-routing.module';\n\nimport { PhoneVerificationPage } from './phone-verification.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    PhoneVerificationPageRoutingModule\n  ],\n  declarations: [PhoneVerificationPage]\n})\nexport class PhoneVerificationPageModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { ApiCallsService } from '../services/api-calls.service';\nimport { Storage } from '@ionic/storage-angular';\nimport { ToastController } from \"@ionic/angular\";\n\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from \"@angular/forms\";\nimport { LoginService } from '../services/login.service'\nimport { Router } from '@angular/router';\nimport { Observable, of } from 'rxjs';\n\n@Component({\n  selector: 'app-phone-verification',\n  templateUrl: './phone-verification.page.html',\n  styleUrls: ['./phone-verification.page.scss'],\n})\nexport class PhoneVerificationPage implements OnInit {\n  waitText = null;\n  codeForm: FormGroup\n  isError: boolean = false\n  verificationType = null\n  userDetails$: Observable<any> = of(this.loginService.currentUser.value)\n  constructor(\n    private apiServices: ApiCallsService,\n    private toastController: ToastController,\n    private formBuilder: FormBuilder,\n    private loginService: LoginService,\n    private storage: Storage,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    this.codeForm = this.formBuilder.group({\n      first: new FormControl(\"\", [Validators.required]),\n      second: new FormControl(\"\", [Validators.required]),\n      third: new FormControl(\"\", [Validators.required]),\n      fourth: new FormControl(\"\", [Validators.required]),\n    })\n  }\n\n  generateVerificationCode(type) {\n    this.verificationType = type\n    const currentUser = this.loginService.currentUser.value;\n    let data = {\n      \"id\": currentUser.userDetails.id,\n      \"reason\": \"Just because I can\",\n      \"userType\": \"BUSINESS\",\n    }\n    if (type == 'SMS') {\n      this.waitText = 'sending'\n      data['verificationType'] = \"mobile\";\n      console.log(data)\n      this.apiServices.post(\"generate-verification-code\", data).subscribe(res => {\n        console.log(res)\n        this.waitText = null\n      }, error => {\n        console.log(error)\n        this.waitText = null\n      })\n    }\n  }\n\n  verifyVerificationCode(formValues) {\n    this.waitText = 'Please wait...'\n    if (this.codeForm.valid) {\n      const currentUser = this.loginService.currentUser.value;\n      let data = {\n        \"userId\": currentUser.userDetails.id,\n        \"verificationNumber\": formValues.first + formValues.second + formValues.third + formValues.fourth\n      }\n      // if (this.verificationType == 'SMS') {\n      data['type'] = \"mobile\";\n      console.log(data)\n      this.apiServices.post(\"verify-verification-code\", data).subscribe(res => {\n        console.log(res)\n        let user = this.loginService.currentUser.value\n        user.userDetails.verifiedMobileNumber = true;\n        this.loginService.currentUser.next(user)\n        this.storage.set('userDetails', user);\n        this.waitText = null\n        // if (currentUser.userDetails.verifiedMobileNumber == true ) {\n        //   this.router.navigate([\"business-dashboard\"]);\n        // }\n\n        // else {\n        //   this.router.navigate([\"login\"]);\n        // }\n        this.router.navigate(['business-dashboard']);\n      }, error => {\n        console.log(error)\n        this.waitText = null\n      })\n      // }\n\n    }\n    else {\n      this.waitText = null\n      console.log('Please Enter Code..')\n    }\n  }\n\n}\n","export default \"ion-grid {\\n  padding: 10px;\\n}\\n\\nion-label {\\n  font-weight: 600;\\n  font-size: 14px;\\n}\\n\\n.verify-number {\\n  margin: 5px;\\n  text-align: center;\\n  border-radius: 4px;\\n  font-weight: 400;\\n  font-size: 18px;\\n  border: 1px solid #1A6AE1;\\n}\\n\\n.native-.sc-ion-input-ios {\\n  padding-left: 10px !important;\\n  padding-right: 10px !important;\\n}\\n\\n.native-input.sc-ion-input-md {\\n  padding-left: 10px !important;\\n  padding-right: 10px !important;\\n}\\n\\nion-text p {\\n  font-size: 14px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBob25lLXZlcmlmaWNhdGlvbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUE7RUFDSSxhQUFBO0FBSEo7O0FBS0E7RUFDSSxnQkFBQTtFQUNBLGVBQUE7QUFGSjs7QUFJQTtFQUNJLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EseUJBQUE7QUFESjs7QUFJQTtFQUNJLDZCQUFBO0VBQ0EsOEJBQUE7QUFESjs7QUFHQTtFQUNJLDZCQUFBO0VBQ0EsOEJBQUE7QUFBSjs7QUFHSTtFQUNJLGVBQUE7QUFBUiIsImZpbGUiOiJwaG9uZS12ZXJpZmljYXRpb24ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ1NTIERvY3VtZW50c1xuXG4kYmx1ZS1jb2xvcjogIzFBNkFFMTtcblxuaW9uLWdyaWQge1xuICAgIHBhZGRpbmc6IDEwcHg7XG59XG5pb24tbGFiZWwge1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgZm9udC1zaXplOiAxNHB4O1xufVxuLnZlcmlmeS1udW1iZXIge1xuICAgIG1hcmdpbjogNXB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICBmb250LXNpemU6IDE4cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgJGJsdWUtY29sb3I7XG4gICAgLy8gYm9yZGVyOiAxcHggc29saWQgI2QzZDdkYTlhO1xufVxuLm5hdGl2ZS0uc2MtaW9uLWlucHV0LWlvcyB7XG4gICAgcGFkZGluZy1sZWZ0OiAxMHB4ICFpbXBvcnRhbnQ7XG4gICAgcGFkZGluZy1yaWdodDogMTBweCAhaW1wb3J0YW50O1xufVxuLm5hdGl2ZS1pbnB1dC5zYy1pb24taW5wdXQtbWQge1xuICAgIHBhZGRpbmctbGVmdDogMTBweCAhaW1wb3J0YW50O1xuICAgIHBhZGRpbmctcmlnaHQ6IDEwcHggIWltcG9ydGFudDtcbn1cbmlvbi10ZXh0IHtcbiAgICBwIHtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgIH1cbn1cbiJdfQ== */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"title-android\\\" color=\\\"primary\\\">\\n      Phone verification\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\" class=\\\"title-ios\\\" color=\\\"primary\\\">Phone verification</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <ion-text class=\\\"ion-text-center\\\">\\n          <p>Please click <b>TEXT</b> or <b>CALL</b> button to recieve the 4-digit code sent to your phone number:<br>\\n            <ion-text color=\\\"primary\\\" *ngIf=\\\"userDetails$ | async as user\\\"><b>+{{user.userDetails.intCode}}\\n                {{user.userDetails.mobileNumber}}</b></ion-text>\\n          </p>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <form [formGroup]=\\\"codeForm\\\" (ngSubmit)=\\\"verifyVerificationCode(codeForm.value)\\\">\\n          <ion-grid>\\n            <ion-label>Verifcation code</ion-label>\\n            <ion-row>\\n              <ion-col class=\\\"verify-number\\\">\\n                <div>\\n                  <ion-input type=\\\"text\\\" formControlName=\\\"first\\\" maxlength=\\\"1\\\"></ion-input>\\n                </div>\\n              </ion-col>\\n              <ion-col class=\\\"verify-number\\\">\\n                <div>\\n                  <ion-input type=\\\"text\\\" formControlName=\\\"second\\\" maxlength=\\\"1\\\"></ion-input>\\n                </div>\\n              </ion-col>\\n              <ion-col class=\\\"verify-number\\\">\\n                <div>\\n                  <ion-input type=\\\"text\\\" formControlName=\\\"third\\\" maxlength=\\\"1\\\"></ion-input>\\n                </div>\\n              </ion-col>\\n              <ion-col class=\\\"verify-number\\\">\\n                <div>\\n                  <ion-input type=\\\"text\\\" formControlName=\\\"fourth\\\" maxlength=\\\"1\\\"></ion-input>\\n                </div>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n\\n          <!-- <p class=\\\"ion-text-center\\\">Didnâ€™t get the code? \\n              <ion-text color=\\\"primary\\\"><b>Resend</b></ion-text>\\n            </p> -->\\n\\n          <ion-row class=\\\"ion-align-item-center\\\">\\n            <ion-col class=\\\"ion-text-center\\\" size=\\\"6\\\">\\n              <ion-button color=\\\"primary\\\" (click)=\\\"generateVerificationCode('TEXT')\\\" fill=\\\"outline\\\" size=\\\"small\\\"\\n                expand=\\\"inline-block\\\">{{waitText == 'sending' ? 'Please wait...' : 'TEXT'}}\\n                <ion-icon slot=\\\"start\\\" name=\\\"phone-portrait-outline\\\"></ion-icon>\\n              </ion-button>\\n            </ion-col>\\n\\n            <ion-col class=\\\"ion-text-center\\\" size=\\\"6\\\">\\n              <ion-button color=\\\"primary\\\" (click)=\\\"generateVerificationCode('CALL')\\\" fill=\\\"outline\\\" size=\\\"small\\\"\\n                expand=\\\"inline-block\\\">{{waitText == 'calling' ? 'Please wait...' : 'CALL'}}\\n                <ion-icon slot=\\\"start\\\" name=\\\"call-outline\\\"></ion-icon>\\n              </ion-button>\\n            </ion-col>\\n          </ion-row>\\n\\n          <ion-row>\\n            <ion-col>\\n              <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\">\\n                {{waitText == null ? 'Verify' : 'Please wait...'}}</ion-button>\\n              <!-- <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" [routerLink]=\\\"['/change-phone-number']\\\">Change\\n                phone\\n                number</ion-button> -->\\n            </ion-col>\\n          </ion-row>\\n        </form>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\\n<ion-footer class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" fill=\\\"outline\\\" [routerLink]=\\\"['/change-phone-number']\\\">Change\\n            phone number</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-toolbar>\\n</ion-footer>\";"]}