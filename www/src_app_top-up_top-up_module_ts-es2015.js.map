{"version":3,"sources":["./src/app/top-up/top-up-routing.module.ts","./src/app/top-up/top-up.module.ts","./src/app/top-up/top-up.page.ts","./src/app/top-up/top-up.page.scss","./src/app/top-up/top-up.page.html"],"names":[],"mappings":"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","file":"src_app_top-up_top-up_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TopUpPage } from './top-up.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TopUpPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TopUpPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TopUpPageRoutingModule } from './top-up-routing.module';\n\nimport { TopUpPage } from './top-up.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    TopUpPageRoutingModule\n  ],\n  declarations: [TopUpPage]\n})\nexport class TopUpPageModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { BusinessPaymentService } from '../services/business-payment.service';\nimport { LoginService } from '../services/login.service';\nimport { Router } from '@angular/router';\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from \"@angular/forms\";\nimport { Observable, EMPTY, of } from 'rxjs';\nimport { tap, catchError } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-top-up',\n  templateUrl: './top-up.page.html',\n  styleUrls: ['./top-up.page.scss'],\n})\nexport class TopUpPage implements OnInit {\n  formGroup: FormGroup\n  isError: boolean = false\n  btnTxt = 'Add credit'\n  account$: Observable<any>\n  savedCards$: Observable<any>\n  local = this.loginService.currentUser.value\n  constructor(\n    private apiServices: BusinessPaymentService,\n    private formBuilder: FormBuilder,\n    private loginService: LoginService,\n    private router: Router,\n  ) { }\n\n  ngOnInit() {\n    this.formGroup = this.formBuilder.group({\n      topUpAmount: new FormControl(\"\", [Validators.required]),\n      cardReference: new FormControl(\"\", [Validators.required]),\n    })\n    this.getAccount()\n    this.getSavedCards()\n  }\n\n  get topUpAmount() {\n    return this.formGroup.get(\"topUpAmount\");\n  }\n  get cardReference() {\n    return this.formGroup.get(\"cardReference\");\n  }\n\n  getSavedCards() {\n    let user = this.loginService.currentUser.value\n    console.log(user)\n    this.savedCards$ = this.apiServices.get('retrieve-stored-card', 'businessId=' + user.userDetails.id).pipe(\n      tap((cards) => \"cards:\" + cards),\n      catchError((err) => {\n        return EMPTY;\n      })\n    );\n  }\n\n  getAccount() {\n    let user = this.loginService.currentUser.value\n    this.account$ = this.apiServices.get('retrieve-account', 'id=' + user.userDetails.id).pipe(\n      tap((account) => \"account:\" + account),\n      catchError((err) => {\n        return EMPTY;\n      })\n    );\n  }\n\n  handleFormSubmission(values) {\n    this.btnTxt = 'Please wait...'\n    let payLoad = values;\n    payLoad[\"id\"] = this.local.userDetails.id\n    this.isError = false\n    if (this.formGroup.valid) {\n      this.apiServices.post('top-up', payLoad).subscribe(res => {\n        this.btnTxt = 'Add credit'\n        console.log(res)\n        this.router.navigate([\"my-balance\"]);\n      }, error => {\n        this.btnTxt = 'Add credit'\n        console.log(error)\n      })\n    }\n    else {\n      this.btnTxt = 'Add credit'\n      this.isError = true;\n    }\n  }\n\n}\n","export default \"ion-grid {\\n  padding: 10px;\\n}\\n\\n.card-blue {\\n  background: #1A6AE1 0% 0% no-repeat;\\n  box-shadow: 0px 10px 10px #0000001A;\\n  border-radius: 8px;\\n  opacity: 1;\\n}\\n\\n.heading-title {\\n  color: #FFFFFF;\\n  font-weight: 800;\\n  font-size: 20px;\\n  padding: 25px;\\n  line-height: 30px;\\n  float: left;\\n  width: 50%;\\n}\\n\\n.balance {\\n  padding: 40px 20px;\\n}\\n\\n.title {\\n  padding-left: 20px;\\n}\\n\\nion-select {\\n  padding-left: 10px;\\n  padding-right: 8px;\\n}\\n\\nion-label {\\n  font-weight: 400;\\n  font-size: 14px;\\n  text-transform: capitalize;\\n}\\n\\n.txt-wrapper {\\n  padding-left: 6px;\\n  border-radius: 4px;\\n  font-size: 13px;\\n  border: 1px solid #d3d7da9a;\\n}\\n\\n.select-wrapper {\\n  border-radius: 4px;\\n  border: 1px solid #d3d7da9a;\\n}\\n\\nion-card {\\n  margin: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvcC11cC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBS0E7RUFDSSxhQUFBO0FBSko7O0FBTUE7RUFDSSxtQ0FBQTtFQUNBLG1DQUFBO0VBQ0Esa0JBQUE7RUFDQSxVQUFBO0FBSEo7O0FBTUE7RUFDSSxjQWJVO0VBY1YsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsYUFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLFVBQUE7QUFISjs7QUFLQTtFQUNJLGtCQUFBO0FBRko7O0FBSUE7RUFDSSxrQkFBQTtBQURKOztBQUdBO0VBQ0ksa0JBQUE7RUFDQSxrQkFBQTtBQUFKOztBQUVBO0VBQ0ksZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsMEJBQUE7QUFDSjs7QUFDQTtFQUNJLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsMkJBQUE7QUFFSjs7QUFBQTtFQUNJLGtCQUFBO0VBQ0EsMkJBQUE7QUFHSjs7QUFEQTtFQUNJLFlBQUE7QUFJSiIsImZpbGUiOiJ0b3AtdXAucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ1NTIERvY3VtZW50c1xuXG4kYmx1ZS1jb2xvcjogIzFBNkFFMTtcbiR3aGl0ZS1jb2xvcjogI0ZGRkZGRjtcblxuaW9uLWdyaWQge1xuICAgIHBhZGRpbmc6IDEwcHg7XG59XG4uY2FyZC1ibHVlIHtcbiAgICBiYWNrZ3JvdW5kOiAkYmx1ZS1jb2xvciAwJSAwJSBuby1yZXBlYXQ7XG4gICAgYm94LXNoYWRvdzogMHB4IDEwcHggMTBweCAjMDAwMDAwMUE7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIG9wYWNpdHk6IDE7XG59XG5cbi5oZWFkaW5nLXRpdGxlIHtcbiAgICBjb2xvcjogJHdoaXRlLWNvbG9yO1xuICAgIGZvbnQtd2VpZ2h0OiA4MDA7XG4gICAgZm9udC1zaXplOiAyMHB4O1xuICAgIHBhZGRpbmc6IDI1cHg7XG4gICAgbGluZS1oZWlnaHQ6IDMwcHg7XG4gICAgZmxvYXQ6IGxlZnQ7XG4gICAgd2lkdGg6IDUwJTtcbn1cbi5iYWxhbmNlIHtcbiAgICBwYWRkaW5nOiA0MHB4IDIwcHg7XG59XG4udGl0bGUge1xuICAgIHBhZGRpbmctbGVmdDogMjBweDtcbn1cbmlvbi1zZWxlY3Qge1xuICAgIHBhZGRpbmctbGVmdDogMTBweDtcbiAgICBwYWRkaW5nLXJpZ2h0OiA4cHg7XG59XG5pb24tbGFiZWwge1xuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xufVxuLnR4dC13cmFwcGVyIHtcbiAgICBwYWRkaW5nLWxlZnQ6IDZweDtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgZm9udC1zaXplOiAxM3B4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkM2Q3ZGE5YTtcbn1cbi5zZWxlY3Qtd3JhcHBlciB7XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICNkM2Q3ZGE5YTtcbn1cbmlvbi1jYXJkIHtcbiAgICBtYXJnaW46IDEwcHg7XG59Il19 */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"title-android\\\">\\n      Top up\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\" class=\\\"title-ios\\\">Top up</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <ion-segment value=\\\"Top up\\\">\\n          <ion-segment-button value=\\\"My credit\\\" [routerLink]=\\\"['/my-balance']\\\">\\n            <ion-label>My credit</ion-label>\\n          </ion-segment-button>\\n\\n          <ion-segment-button value=\\\"Top up\\\" [routerLink]=\\\"['/top-up']\\\">\\n            <ion-label>Top up</ion-label>\\n          </ion-segment-button>\\n\\n          <ion-segment-button value=\\\"Transactions\\\" [routerLink]=\\\"['/transaction-history']\\\">\\n            <ion-label>Transactions</ion-label>\\n          </ion-segment-button>\\n        </ion-segment>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n  <ion-row>\\n    <ion-col>\\n      <ion-card class=\\\"card-blue\\\">\\n        <div class=\\\"heading-title\\\">My<br> Credit</div>\\n        <div *ngIf=\\\"!account$\\\" class=\\\"heading-title balance\\\">£0.00</div>\\n        <div *ngIf=\\\"account$ | async as account\\\" class=\\\"heading-title balance\\\">£{{account.total}}</div>\\n      </ion-card>\\n    </ion-col>\\n  </ion-row>\\n\\n  <form [formGroup]=\\\"formGroup\\\" (ngSubmit)=\\\"handleFormSubmission(formGroup.value)\\\">\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <ion-label>Cardholder nickname <ion-text color=\\\"danger\\\">*</ion-text>\\n          </ion-label>\\n          <div class=\\\"select-wrapper\\\">\\n            <ion-select *ngIf=\\\"savedCards$ | async as cards\\\" formControlName=\\\"cardReference\\\" slot=\\\"start\\\"\\n              placeholder=\\\"Saved cards\\\">\\n              <ion-select-option *ngFor=\\\"let card of cards\\\" [value]=\\\"card.cardId\\\">{{card.cardReference}}\\n              </ion-select-option>\\n            </ion-select>\\n          </div>\\n          <ion-label *ngIf=\\\"(cardReference.invalid &&(cardReference.dirty || cardReference.touched))|| isError\\\"\\n            color=\\\"danger\\\">Select a card</ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row>\\n        <ion-col>\\n          <ion-label>Top up amount <ion-text color=\\\"danger\\\">*</ion-text>\\n          </ion-label>\\n          <div class=\\\"txt-wrapper\\\">\\n            <ion-input formControlName=\\\"topUpAmount\\\" type=\\\"number\\\" placeholder=\\\"£50.00\\\"></ion-input>\\n          </div>\\n          <ion-label *ngIf=\\\"(topUpAmount.invalid &&(topUpAmount.dirty || topUpAmount.touched))|| isError\\\"\\n            color=\\\"danger\\\">Top up amount is required</ion-label>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <ion-button [disabled]=\\\"btnTxt == 'Please wait...' ? true : false\\\" type=\\\"submit\\\" color=\\\"primary\\\"\\n            expand=\\\"block\\\">\\n            {{btnTxt}}\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n</ion-content>\";"],"sourceRoot":"webpack:///"}