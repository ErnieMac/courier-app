{"version":3,"sources":["./src/app/phone-verification/phone-verification-routing.module.ts","./src/app/phone-verification/phone-verification.module.ts","./src/app/phone-verification/phone-verification.page.ts","./src/app/phone-verification/phone-verification.page.scss","./src/app/phone-verification/phone-verification.page.html"],"names":[],"mappings":"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","file":"src_app_phone-verification_phone-verification_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PhoneVerificationPage } from './phone-verification.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PhoneVerificationPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PhoneVerificationPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PhoneVerificationPageRoutingModule } from './phone-verification-routing.module';\n\nimport { PhoneVerificationPage } from './phone-verification.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    PhoneVerificationPageRoutingModule\n  ],\n  declarations: [PhoneVerificationPage]\n})\nexport class PhoneVerificationPageModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { ApiCallsService } from '../services/api-calls.service';\nimport { Storage } from '@ionic/storage-angular';\nimport { ToastController } from \"@ionic/angular\";\n\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from \"@angular/forms\";\nimport { LoginService } from '../services/login.service'\nimport { Router } from '@angular/router';\nimport { Observable, of } from 'rxjs';\n\n@Component({\n  selector: 'app-phone-verification',\n  templateUrl: './phone-verification.page.html',\n  styleUrls: ['./phone-verification.page.scss'],\n})\nexport class PhoneVerificationPage implements OnInit {\n  waitText = null;\n  codeForm: FormGroup\n  isError: boolean = false\n  verificationType = null\n  userDetails$: Observable<any> = of(this.loginService.currentUser.value)\n  constructor(\n    private apiServices: ApiCallsService,\n    private toastController: ToastController,\n    private formBuilder: FormBuilder,\n    private loginService: LoginService,\n    private storage: Storage,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    this.codeForm = this.formBuilder.group({\n      first: new FormControl(\"\", [Validators.required]),\n      second: new FormControl(\"\", [Validators.required]),\n      third: new FormControl(\"\", [Validators.required]),\n      fourth: new FormControl(\"\", [Validators.required]),\n    })\n  }\n\n  generateVerificationCode(type) {\n    this.verificationType = type\n    const currentUser = this.loginService.currentUser.value;\n    let data = {\n      \"id\": currentUser.userDetails.id,\n      \"reason\": \"Just because I can\",\n      \"userType\": \"BUSINESS\",\n    }\n    if (type == 'SMS') {\n      this.waitText = 'sending'\n      data['verificationType'] = \"mobile\";\n      console.log(data)\n      this.apiServices.post(\"generate-verification-code\", data).subscribe(res => {\n        console.log(res)\n        this.waitText = null\n      }, error => {\n        console.log(error)\n        this.waitText = null\n      })\n    }\n  }\n\n  verifyVerificationCode(formValues) {\n    this.waitText = 'Please wait...'\n    if (this.codeForm.valid) {\n      const currentUser = this.loginService.currentUser.value;\n      let data = {\n        \"userId\": currentUser.userDetails.id,\n        \"verificationNumber\": formValues.first + formValues.second + formValues.third + formValues.fourth\n      }\n      // if (this.verificationType == 'SMS') {\n      data['type'] = \"mobile\";\n      console.log(data)\n      this.apiServices.post(\"verify-verification-code\", data).subscribe(res => {\n        console.log(res)\n        let user = this.loginService.currentUser.value\n        user.userDetails.verifiedMobileNumber = true;\n        this.loginService.currentUser.next(user)\n        this.storage.set('userDetails', user);\n        this.waitText = null\n        // if (currentUser.userDetails.verifiedMobileNumber == true ) {\n        //   this.router.navigate([\"business-dashboard\"]);\n        // }\n\n        // else {\n        //   this.router.navigate([\"login\"]);\n        // }\n        this.router.navigate(['business-dashboard']);\n      }, error => {\n        console.log(error)\n        this.waitText = null\n      })\n      // }\n\n    }\n    else {\n      this.waitText = null\n      console.log('Please Enter Code..')\n    }\n  }\n\n}\n","export default \"ion-grid {\\n  padding: 10px;\\n}\\n\\nion-label {\\n  font-weight: 600;\\n  font-size: 14px;\\n}\\n\\n.verify-number {\\n  margin: 5px;\\n  text-align: center;\\n  border-radius: 4px;\\n  font-weight: 400;\\n  font-size: 18px;\\n  border: 1px solid #1A6AE1;\\n}\\n\\n.native-.sc-ion-input-ios {\\n  padding-left: 10px !important;\\n  padding-right: 10px !important;\\n}\\n\\n.native-input.sc-ion-input-md {\\n  padding-left: 10px !important;\\n  padding-right: 10px !important;\\n}\\n\\nion-text p {\\n  font-size: 14px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBob25lLXZlcmlmaWNhdGlvbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUE7RUFDSSxhQUFBO0FBSEo7O0FBS0E7RUFDSSxnQkFBQTtFQUNBLGVBQUE7QUFGSjs7QUFJQTtFQUNJLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EseUJBQUE7QUFESjs7QUFJQTtFQUNJLDZCQUFBO0VBQ0EsOEJBQUE7QUFESjs7QUFHQTtFQUNJLDZCQUFBO0VBQ0EsOEJBQUE7QUFBSjs7QUFHSTtFQUNJLGVBQUE7QUFBUiIsImZpbGUiOiJwaG9uZS12ZXJpZmljYXRpb24ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ1NTIERvY3VtZW50c1xuXG4kYmx1ZS1jb2xvcjogIzFBNkFFMTtcblxuaW9uLWdyaWQge1xuICAgIHBhZGRpbmc6IDEwcHg7XG59XG5pb24tbGFiZWwge1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgZm9udC1zaXplOiAxNHB4O1xufVxuLnZlcmlmeS1udW1iZXIge1xuICAgIG1hcmdpbjogNXB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICBmb250LXNpemU6IDE4cHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgJGJsdWUtY29sb3I7XG4gICAgLy8gYm9yZGVyOiAxcHggc29saWQgI2QzZDdkYTlhO1xufVxuLm5hdGl2ZS0uc2MtaW9uLWlucHV0LWlvcyB7XG4gICAgcGFkZGluZy1sZWZ0OiAxMHB4ICFpbXBvcnRhbnQ7XG4gICAgcGFkZGluZy1yaWdodDogMTBweCAhaW1wb3J0YW50O1xufVxuLm5hdGl2ZS1pbnB1dC5zYy1pb24taW5wdXQtbWQge1xuICAgIHBhZGRpbmctbGVmdDogMTBweCAhaW1wb3J0YW50O1xuICAgIHBhZGRpbmctcmlnaHQ6IDEwcHggIWltcG9ydGFudDtcbn1cbmlvbi10ZXh0IHtcbiAgICBwIHtcbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgIH1cbn1cbiJdfQ== */\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"title-android\\\" color=\\\"primary\\\">\\n      Phone verification\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\" class=\\\"title-ios\\\" color=\\\"primary\\\">Phone verification</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <ion-text class=\\\"ion-text-center\\\">\\n          <p>Please click <b>TEXT</b> or <b>CALL</b> button to recieve the 4-digit code sent to your phone number:<br>\\n            <ion-text color=\\\"primary\\\" *ngIf=\\\"userDetails$ | async as user\\\"><b>+{{user.userDetails.intCode}}\\n                {{user.userDetails.mobileNumber}}</b></ion-text>\\n          </p>\\n        </ion-text>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <form [formGroup]=\\\"codeForm\\\" (ngSubmit)=\\\"verifyVerificationCode(codeForm.value)\\\">\\n          <ion-grid>\\n            <ion-label>Verifcation code</ion-label>\\n            <ion-row>\\n              <ion-col class=\\\"verify-number\\\">\\n                <div>\\n                  <ion-input type=\\\"text\\\" formControlName=\\\"first\\\" maxlength=\\\"1\\\"></ion-input>\\n                </div>\\n              </ion-col>\\n              <ion-col class=\\\"verify-number\\\">\\n                <div>\\n                  <ion-input type=\\\"text\\\" formControlName=\\\"second\\\" maxlength=\\\"1\\\"></ion-input>\\n                </div>\\n              </ion-col>\\n              <ion-col class=\\\"verify-number\\\">\\n                <div>\\n                  <ion-input type=\\\"text\\\" formControlName=\\\"third\\\" maxlength=\\\"1\\\"></ion-input>\\n                </div>\\n              </ion-col>\\n              <ion-col class=\\\"verify-number\\\">\\n                <div>\\n                  <ion-input type=\\\"text\\\" formControlName=\\\"fourth\\\" maxlength=\\\"1\\\"></ion-input>\\n                </div>\\n              </ion-col>\\n            </ion-row>\\n          </ion-grid>\\n\\n          <!-- <p class=\\\"ion-text-center\\\">Didn’t get the code? \\n              <ion-text color=\\\"primary\\\"><b>Resend</b></ion-text>\\n            </p> -->\\n\\n          <ion-row class=\\\"ion-align-item-center\\\">\\n            <ion-col class=\\\"ion-text-center\\\" size=\\\"6\\\">\\n              <ion-button color=\\\"primary\\\" (click)=\\\"generateVerificationCode('TEXT')\\\" fill=\\\"outline\\\" size=\\\"small\\\"\\n                expand=\\\"inline-block\\\">{{waitText == 'sending' ? 'Please wait...' : 'TEXT'}}\\n                <ion-icon slot=\\\"start\\\" name=\\\"phone-portrait-outline\\\"></ion-icon>\\n              </ion-button>\\n            </ion-col>\\n\\n            <ion-col class=\\\"ion-text-center\\\" size=\\\"6\\\">\\n              <ion-button color=\\\"primary\\\" (click)=\\\"generateVerificationCode('CALL')\\\" fill=\\\"outline\\\" size=\\\"small\\\"\\n                expand=\\\"inline-block\\\">{{waitText == 'calling' ? 'Please wait...' : 'CALL'}}\\n                <ion-icon slot=\\\"start\\\" name=\\\"call-outline\\\"></ion-icon>\\n              </ion-button>\\n            </ion-col>\\n          </ion-row>\\n\\n          <ion-row>\\n            <ion-col>\\n              <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\">\\n                {{waitText == null ? 'Verify' : 'Please wait...'}}</ion-button>\\n              <!-- <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" [routerLink]=\\\"['/change-phone-number']\\\">Change\\n                phone\\n                number</ion-button> -->\\n            </ion-col>\\n          </ion-row>\\n        </form>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\\n<ion-footer class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <ion-button type=\\\"submit\\\" color=\\\"primary\\\" expand=\\\"block\\\" fill=\\\"outline\\\" [routerLink]=\\\"['/change-phone-number']\\\">Change\\n            phone number</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </ion-toolbar>\\n</ion-footer>\";"],"sourceRoot":"webpack:///"}